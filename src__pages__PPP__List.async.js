"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6119],{76255:function(e,t,r){r.r(t);var n=r(15009),a=r.n(n),o=r(99289),s=r.n(o),i=r(97857),u=r.n(i),c=r(5574),l=r.n(c),d=r(87739),f=r(40956),p=r(64119),x=r(98165),h=r(39380),m=r(32427),y=r(88026),j=r(2453),R=r(7134),k=r(67294),v=(r(8849),r(28704)),P=r(27484),N=r.n(P),S=r(70178),L=r.n(S),V=r(39678),b=r(29363),I=r(71874),T=r(44718),F=r(85893);N().extend(L());t.default=function(){var e=(0,y.useDispatch)(),t=(0,y.useSelector)((function(e){return e.ppp.projectsDataSourceV2})),r=(0,y.useSelector)((function(e){return e.ppp.projectsSolVaultV2})),n=(0,k.useState)(!0),o=l()(n,2),i=o[0],c=o[1],P=j.ZP.useMessage(),S=l()(P,2),L=S[0],g=S[1],D=(0,T.R)().connection,w=(0,k.useMemo)((function(){var e=[];return t.length&&r.length&&t.forEach((function(t,n){e.push(u()(u()({},t),{},{solVault:r[n].lamports}))})),e}),[t,r]),C=(0,k.useCallback)(function(){var t=s()(a()().mark((function t(r){var n,o,s,i,u,l;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,(0,v.yC)();case 4:return n=t.sent,o=n.projects,s=n.projectsDataSource,i=s.map((function(e){return new b.PublicKey(e.authorityPubkey)})),t.next=10,(0,I.ep)(r,i);case 10:u=t.sent,l=[],i.forEach((function(e,t){l.push({lamports:u[t]?u[t].lamports:0,authorityPubkey:e.toString()})})),e(f.N.setProjectsSolVaultV2(l)),e(f.N.setProjectsV2(o)),e(f.N.setProjectsDataSourceV2(s)),c(!1),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),c(!1),(0,p.Tv)(t.t0,L,"handleProjects");case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),[]),O=(0,k.useMemo)((function(){return[{title:"#",dataIndex:"key",key:"key",align:"center",render:function(e,t){return(0,F.jsx)("span",{children:t.key})}},{title:"项目",dataIndex:"projectPubkey",key:"projectPubkey",render:function(e,t){var r=t.nftImageUrl;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(R.C,{className:"mr-2",size:"large",shape:"square",src:r}),(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"font-medium",children:t.nftName})})]}),(0,F.jsx)("div",{children:(0,p.LH)(t.projectName)}),(0,F.jsx)(V.k,{address:t.mintPubkey,addressPrefix:"",ellipsis:!0,copyable:!0})]})}},{title:"下一轮倒计时",dataIndex:"nextRoundLocalValue",key:"nextRoundLocalValue",sorter:function(e,t){return e.nextRoundLocalValue-t.nextRoundLocalValue},render:function(e,t){var r=t.secPerRound/3600+" Hours";return(0,F.jsxs)("div",{children:[(0,F.jsx)(d.Wo,{className:"font-medium text-base",value:t.nextRoundLocalValue}),(0,F.jsx)("div",{children:t.nextRoundLocalFormat}),(0,F.jsx)("div",{children:r})]})}},{title:"流通量",dataIndex:"nftSupply",key:"nftSupply",sorter:function(e,t){return t.nftSupply-e.nftSupply},render:function(e,t){return(0,F.jsxs)("div",{children:[t.nftSupply," / ",t.maxNftSupply]})}},{title:"每轮涨幅",dataIndex:"increasePerRound",key:"increasePerRound",sorter:function(e,t){return e.increasePerRound-t.increasePerRound},render:function(e,t){var r=t.increasePerRound/100+" %";return(0,F.jsx)("span",{children:r})}},{title:"手续费",dataIndex:"tradeFeeRatio",key:"tradeFeeRatio",sorter:function(e,t){return e.tradeFeeRate-t.tradeFeeRate},render:function(e,t){var r=t.tradeFeeRate+" %";return(0,F.jsx)("span",{children:r})}},{title:"利润率",dataIndex:"profitRate",key:"profitRate",sorter:function(e,t){return t.profitRate-e.profitRate},render:function(e,t){var r=t.profitRate.toFixed(2)+" %";return(0,F.jsx)("div",{children:r})}},{title:"日化率",dataIndex:"profitRateDay",key:"profitRateDay",sorter:function(e,t){return t.profitRateDay-e.profitRateDay},render:function(e,t){var r=t.profitRateDay.toFixed(2)+" %";return(0,F.jsx)("div",{children:r})}},{title:"年化率",dataIndex:"profitRateApr",key:"profitRateApr",sorter:function(e,t){return t.profitRateYear-e.profitRateYear},render:function(e,t){var r=t.profitRateYear.toFixed(0)+" %";return(0,F.jsx)("div",{children:r})}},{title:"每轮时间",dataIndex:"secPerRound",key:"secPerRound",sorter:function(e,t){return e.secPerRound-t.secPerRound},render:function(e,t){var r=t.secPerRound/3600+" Hours";return(0,F.jsx)("span",{children:r})}},{title:"初始价格",dataIndex:"initNftPrice",key:"initNftPrice",render:function(e,t){return(0,F.jsx)("span",{children:"".concat(t.initNftPrice/b.LAMPORTS_PER_SOL," SOL")})}},{title:"SOL金库",dataIndex:"solVault",key:"solVault",render:function(e,t){return(0,F.jsx)("span",{children:(0,p.uf)(t.solVault/b.LAMPORTS_PER_SOL)})}},{title:"销毁时间",dataIndex:"secToBurnNft",key:"secToBurnNft",sorter:function(e,t){return e.secToBurnNft-t.secToBurnNft},render:function(e,t){var r=t.secToBurnNft/3600+" Hours";return(0,F.jsx)("span",{children:r})}},{title:"销毁兑换",dataIndex:"tokenPerNft",key:"tokenPerNft",render:function(e,t){var r=(0,p.uf)(t.tokenPerNft/1e6,0)+" "+t.tokenSymbol;return(0,F.jsx)("div",{children:r})}},{title:"创建时间",dataIndex:"createTimeLocalFormat",key:"createTimeLocalFormat",sorter:function(e,t){return t.createTimeLocalValue-e.createTimeLocalValue},render:function(e,t){return(0,F.jsx)("span",{children:t.createTimeLocalFormat})}}]}),[]);return(0,k.useEffect)((function(){D&&C(D)}),[D]),(0,F.jsxs)(h._z,{className:"ppp-list",ghost:!0,children:[(0,F.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{spin:i,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:function(){return C(D)}}),(0,F.jsxs)("span",{className:"ml-[8px]",children:["更新: ",N()().format().substring(0,19)]})]})}),(0,F.jsx)(m.Z,{className:"",scroll:{x:!0},size:"small",columns:O,dataSource:w,defaultData:[],search:!1,options:!1,pagination:{pageSize:50}}),g]})}},8849:function(){}}]);