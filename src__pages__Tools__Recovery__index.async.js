"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3060],{4828:function(e,t,n){n.r(t);var s=n(15009),a=n.n(s),r=n(99289),o=n.n(r),c=n(5574),i=n.n(c),l=n(64119),u=n(39380),m=n(38345),f=n(97269),p=n(64317),h=n(5966),d=n(88026),g=n(67294),b=n(71874),x=n(2453),y=n(16568),k=n(54306),v=n(44718),w=n(29363),P=n(9437),A=n(85893),M=function(){var e=x.ZP.useMessage(),t=i()(e,2),n=t[0],s=t[1],r=y.ZP.useNotification(),c=i()(r,2),M=c[0],T=c[1],C=(0,k.O)(),j=C.publicKey,R=C.signTransaction,B=(0,v.R)().connection,Z=(0,P.Ab)().chain,F=(0,d.useIntl)(),N=F.formatMessage({id:"common.intlInputException"}),V=F.formatMessage({id:"common.intlRecovery"}),z=F.formatMessage({id:"common.intlReceiveAccount"}),I=F.formatMessage({id:"common.intlAccountType"}),K=F.formatMessage({id:"common.intlSystemAccount"}),L=F.formatMessage({id:"common.intlPleaseConnectWallet"}),S=F.formatMessage({id:"common.intlNoRent"}),q=(0,g.useRef)(),H=(0,g.useCallback)(function(){var e=o()(a()().mark((function e(t){var s,r,o,c,i,u,m,f,p,h,d,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j&&R){e.next=4;break}return n.error(L),e.abrupt("return",!1);case 4:if(s=t.accountType,r=t.receiveAccount,o=[],"systemAccount"!==s){e.next=32;break}return e.next=9,B.getAccountInfo(j);case 9:if((c=e.sent)&&0!==c.lamports){e.next=13;break}return n.info(S),e.abrupt("return",!0);case 13:return i=(null==c?void 0:c.lamports)-5e3,o.push(w.ComputeBudgetProgram.setComputeUnitPrice({microLamports:0})),o.push(w.SystemProgram.transfer({fromPubkey:j,toPubkey:new w.PublicKey(r),lamports:i})),e.next=18,B.getLatestBlockhash();case 18:return u=e.sent,m=u.blockhash,f=u.lastValidBlockHeight,p=new w.TransactionMessage({payerKey:j,recentBlockhash:m,instructions:o}).compileToLegacyMessage(),h=new w.VersionedTransaction(p),e.next=25,R(h);case 25:return d=e.sent,e.next=28,B.sendTransaction(d);case 28:return g=e.sent,x={signature:g,blockhash:m,lastValidBlockHeight:f},e.next=32,(0,b.fS)(Z,B,x,"confirmed",M,n);case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),(0,l.Tv)(e.t0,n,"handleFinish");case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t){return e.apply(this,arguments)}}(),[B,j,R,Z]);return(0,A.jsx)(u._z,{className:"",ghost:!0,children:(0,A.jsx)("div",{className:"flex flex-wrap justify-center",children:(0,A.jsxs)(m.Z,{title:V,style:{width:"500px"},children:[(0,A.jsxs)(f.A,{formRef:q,onFinish:H,layout:"vertical",initialValues:{},submitter:{render:function(e,t){return[t[0],t[1]]}},children:[(0,A.jsx)(p.Z,{name:"accountType",label:I,options:[{value:"systemAccount",label:K}],placeholder:"",rules:[{required:!0,message:N}],fieldProps:{size:"large",autoFocus:!1,allowClear:!0}}),(0,A.jsx)(h.Z,{name:"receiveAccount",label:z,placeholder:"",rules:[{required:!0,message:N,whitespace:!0}],fieldProps:{size:"large",autoFocus:!1,allowClear:!0}})]}),s,T]})})})};t.default=(0,g.memo)(M)}}]);