(self.webpackChunk=self.webpackChunk||[]).push([[2743],{10332:function(e,t,r){"use strict";r.d(t,{V:function(){return o},v:function(){return a}});var n=r(64285),i=r(34408);function a(e,t){var r=e.layout.span>=0?e.layout.span:i._3(e,t),a=n.lW.alloc(r),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,a),a}function o(e,t){var r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw new Error("invalid instruction; instruction index mismatch ".concat(r.instruction," != ").concat(e.index));return r}},34408:function(e,t,r){"use strict";r.d(t,{Gt:function(){return u},N4:function(){return c},ZL:function(){return a},_3:function(){return d},pE:function(){return o},rI:function(){return s},zL:function(){return l}});var n=r(64285),i=r(39386),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return i.Ik(32,e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=i.n_([i.Jq("length"),i.Jq("lengthPadding"),i.Ik(i.cv(i.Jq(),-8),"chars")],e),r=t.decode.bind(t),a=t.encode.bind(t),o=t;return o.decode=function(e,t){return r(e,t).chars.toString()},o.encode=function(e,t,r){var i={chars:n.lW.from(e,"utf8")};return a(i,t,r)},o.alloc=function(e){return i.Jq().span+i.Jq().span+n.lW.from(e,"utf8").length},o},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return i.n_([a("staker"),a("withdrawer")],e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return i.n_([i.gM("unixTimestamp"),i.gM("epoch"),a("custodian")],e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return i.n_([a("nodePubkey"),a("authorizedVoter"),a("authorizedWithdrawer"),i.u8("commission")],e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return i.n_([i.Jq("voteAuthorizationType"),a("currentAuthorityDerivedKeyOwnerPubkey"),o("currentAuthorityDerivedKeySeed"),a("newAuthorized")],e)};function d(e,t){var r=function e(r){if(r.span>=0)return r.span;if("function"==typeof r.alloc)return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){var n=t[r.property];if(Array.isArray(n))return n.length*e(r.elementLayout)}else if("fields"in r)return d({layout:r},t[r.property]);return 0},n=0;return e.layout.fields.forEach((function(e){n+=r(e)})),n}},50615:function(e,t,r){"use strict";r.d(t,{mm:function(){return ze},h5:function(){return xe},dy:function(){return Ne},Xl:function(){return We}});var n=r(9783),i=r.n(n),a=r(5574),o=r.n(a),u=r(12444),s=r.n(u),c=r(72004),l=r.n(c),d=r(39386),y=r(34839),h=r(34408),p=r(15009),g=r.n(p),f=r(99289),k=r.n(f),b=r(25098),v=r.n(b),m=r(31996),I=r.n(m),S=r(26037),w=r.n(S),W=r(13550),P=r.n(W),x=r(10011),A=r.n(x),z=r(64285),K=r(17748),_=r(58383),B=(_.UN.utils.randomPrivateKey,function(){var e=_.UN.utils.randomPrivateKey(),t=E(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}}),E=_.UN.getPublicKey;function q(e){try{return _.UN.ExtendedPoint.fromHex(e),!0}catch(e){return!1}}var L,T,J=function(e,t){return _.UN.sign(e,t.slice(0,32))},O=_.UN.verify,M=r(25532),C=function(){function e(t){s()(this,e),Object.assign(this,t)}return l()(e,[{key:"encode",value:function(){return z.lW.from((0,M.serialize)(U,this))}}],[{key:"decode",value:function(e){return(0,M.deserialize)(U,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,M.deserializeUnchecked)(U,this,e)}}]),e}(),U=new Map,N=function(e){return z.lW.isBuffer(e)?e:e instanceof Uint8Array?z.lW.from(e.buffer,e.byteOffset,e.byteLength):z.lW.from(e)},R=32;var j=1;T=Symbol.toStringTag;var Z=function(e){I()(o,e);var t,r,n,a=w()(o);function o(e){var t;if(s()(this,o),t=a.call(this,{}),i()(v()(t),"_bn",void 0),function(e){return void 0!==e._bn}(e))t._bn=e._bn;else{if("string"==typeof e){var r=A().decode(e);if(r.length!=R)throw new Error("Invalid public key input");t._bn=new(P())(r)}else t._bn=new(P())(e);if(t._bn.byteLength()>R)throw new Error("Invalid public key input")}return t}return l()(o,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return A().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(z.lW);if(e.length===R)return e;var t=z.lW.alloc(32);return e.copy(t,32-e.length),t}},{key:T,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new o(j);return j+=1,new o(e.toBuffer())}},{key:"createWithSeed",value:(n=k()(g()().mark((function e(t,r,n){var i,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=z.lW.concat([t.toBuffer(),z.lW.from(r),n.toBuffer()]),a=(0,K.JQ)(i),e.abrupt("return",new o(a));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"createProgramAddressSync",value:function(e,t){var r=z.lW.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=z.lW.concat([r,N(e)])})),r=z.lW.concat([r,t.toBuffer(),z.lW.from("ProgramDerivedAddress")]);var n=(0,K.JQ)(r);if(q(n))throw new Error("Invalid seeds, address must fall off the curve");return new o(n)}},{key:"createProgramAddress",value:(r=k()(g()().mark((function e(t,r){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"findProgramAddressSync",value:function(e,t){for(var r,n=255;0!=n;){try{var i=e.concat(z.lW.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:(t=k()(g()().mark((function e(t,r){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"isOnCurve",value:function(e){return q(new o(e).toBytes())}}]),o}(C);function D(e){var t=(0,d.Ik)(8,e),r=t.decode.bind(t),n=t.encode.bind(t),i=t,a=(0,y.GH)();return i.decode=function(e,t){var n=r(e,t);return a.decode(n)},i.encode=function(e,t,r){var i=a.encode(e);return n(i,t,r)},i}L=Z,i()(Z,"default",new L("11111111111111111111111111111111")),U.set(Z,{kind:"struct",fields:[["_bn","u256"]]});var F=r(10332),V=d._O("lamportsPerSignature"),H=d.n_([d.Jq("version"),d.Jq("state"),h.ZL("authorizedPubkey"),h.ZL("nonce"),d.n_([V],"feeCalculator")]),G=H.span,Q=new Z("SysvarC1ock11111111111111111111111111111111"),$=(new Z("SysvarEpochSchedu1e111111111111111111111111"),new Z("Sysvar1nstructions1111111111111111111111111"),new Z("SysvarRecentB1ockHashes11111111111111111111")),X=new Z("SysvarRent111111111111111111111111111111111"),Y=(new Z("SysvarRewards111111111111111111111111111111"),new Z("SysvarS1otHashes111111111111111111111111111"),new Z("SysvarS1otHistory11111111111111111111111111"),new Z("SysvarStakeHistory1111111111111111111111111")),ee=r(12665),te=r.n(ee),re=function(e){I()(r,e);var t=w()(r);function r(e){var n;return s()(this,r),n=t.call(this,"Signature ".concat(e," has expired: block height exceeded.")),i()(v()(n),"signature",void 0),n.signature=e,n}return l()(r)}(te()(Error));Object.defineProperty(re.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var ne=function(e){I()(r,e);var t=w()(r);function r(e,n){var a;return s()(this,r),a=t.call(this,"Transaction was not confirmed in ".concat(n.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools.")),i()(v()(a),"signature",void 0),a.signature=e,a}return l()(r)}(te()(Error));Object.defineProperty(ne.prototype,"name",{value:"TransactionExpiredTimeoutError"});var ie=function(e){I()(r,e);var t=w()(r);function r(e){var n;return s()(this,r),n=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid.")),i()(v()(n),"signature",void 0),n.signature=e,n}return l()(r)}(te()(Error));Object.defineProperty(ie.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var ae=r(64599),oe=r.n(ae),ue=r(97857),se=r.n(ue),ce=r(19632),le=r.n(ce),de=1232,ye=function(){function e(t,r){s()(this,e),i()(this,"staticAccountKeys",void 0),i()(this,"accountKeysFromLookups",void 0),this.staticAccountKeys=t,this.accountKeysFromLookups=r}return l()(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=oe()(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(e){r.e(e)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach((function(e,r){t.set(e.toBase58(),r)}));var r=function(e){var r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((function(e){return{programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((function(e){return r(e.pubkey)})),data:e.data}}))}}]),e}();function he(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0==(128&n))break}return t}function pe(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}function ge(e,t){if(!e)throw new Error(t||"Assertion failed")}var fe=function(){function e(t,r){s()(this,e),i()(this,"payer",void 0),i()(this,"keyMetaMap",void 0),this.payer=t,this.keyMetaMap=r}return l()(e,[{key:"getMessageComponents",value:function(){var e=le()(this.keyMetaMap.entries());ge(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=o()(e,2)[1];return t.isSigner&&t.isWritable})),r=e.filter((function(e){var t=o()(e,2)[1];return t.isSigner&&!t.isWritable})),n=e.filter((function(e){var t=o()(e,2)[1];return!t.isSigner&&t.isWritable})),i=e.filter((function(e){var t=o()(e,2)[1];return!t.isSigner&&!t.isWritable})),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};return ge(t.length>0,"Expected at least one writable signer key"),ge(o()(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[a,[].concat(le()(t.map((function(e){var t=o()(e,1)[0];return new Z(t)}))),le()(r.map((function(e){var t=o()(e,1)[0];return new Z(t)}))),le()(n.map((function(e){var t=o()(e,1)[0];return new Z(t)}))),le()(i.map((function(e){var t=o()(e,1)[0];return new Z(t)}))))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),r=o()(t,2),n=r[0],i=r[1],a=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),u=o()(a,2),s=u[0],c=u[1];if(0!==n.length||0!==s.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:i,readonly:c}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,i=new Array,a=new Array,u=oe()(this.keyMetaMap.entries());try{var s=function(){var u=o()(r.value,2),s=u[0],c=u[1];if(t(c)){var l=new Z(s),d=e.findIndex((function(e){return e.equals(l)}));d>=0&&(ge(d<256,"Max lookup table index exceeded"),i.push(d),a.push(l),n.keyMetaMap.delete(s))}};for(u.s();!(r=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}return[i,a]}}],[{key:"compile",value:function(t,r){var n=new Map,i=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},a=i(r);a.isSigner=!0,a.isWritable=!0;var o,u=oe()(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;i(s.programId).isInvoked=!0;var c,l=oe()(s.keys);try{for(l.s();!(c=l.n()).done;){var d=c.value,y=i(d.pubkey);y.isSigner||(y.isSigner=d.isSigner),y.isWritable||(y.isWritable=d.isWritable)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){u.e(e)}finally{u.f()}return new e(r,n)}}]),e}(),ke="Reached end of buffer unexpectedly";function be(e){if(0===e.length)throw new Error(ke);return e.shift()}function ve(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=n[0];if(2===n.length?a+(null!==(t=n[1])&&void 0!==t?t:0)>e.length:a>=e.length)throw new Error(ke);return e.splice.apply(e,le()(n))}var me=function(){function e(t){var r=this;s()(this,e),i()(this,"header",void 0),i()(this,"accountKeys",void 0),i()(this,"recentBlockhash",void 0),i()(this,"instructions",void 0),i()(this,"indexToProgramIds",new Map),this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new Z(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return l()(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:A().decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new ye(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return le()(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];pe(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(A().decode(e.data)),i=[];pe(i,t.length);var a=[];return pe(a,n.length),{programIdIndex:r,keyIndicesCount:z.lW.from(i),keyIndices:t,dataLength:z.lW.from(a),data:n}})),n=[];pe(n,r.length);var i=z.lW.alloc(de);z.lW.from(n).copy(i);var a=n.length;r.forEach((function(e){var t=d.n_([d.u8("programIdIndex"),d.Ik(e.keyIndicesCount.length,"keyIndicesCount"),d.A9(d.u8("keyIndex"),e.keyIndices.length,"keyIndices"),d.Ik(e.dataLength.length,"dataLength"),d.A9(d.u8("userdatum"),e.data.length,"data")]).encode(e,i,a);a+=t})),i=i.slice(0,a);var o=d.n_([d.Ik(1,"numRequiredSignatures"),d.Ik(1,"numReadonlySignedAccounts"),d.Ik(1,"numReadonlyUnsignedAccounts"),d.Ik(t.length,"keyCount"),d.A9(h.ZL("key"),e,"keys"),h.ZL("recentBlockhash")]),u={numRequiredSignatures:z.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:z.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:z.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:z.lW.from(t),keys:this.accountKeys.map((function(e){return N(e.toBytes())})),recentBlockhash:A().decode(this.recentBlockhash)},s=z.lW.alloc(2048),c=o.encode(u,s);return i.copy(s,c),s.slice(0,c+i.length)}}],[{key:"compile",value:function(t){var r=fe.compile(t.instructions,t.payerKey).getMessageComponents(),n=o()(r,2),i=n[0],a=n[1],u=new ye(a).compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:A().encode(e.data)}}));return new e({header:i,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:u})}},{key:"from",value:function(t){var r=le()(t),n=be(r);if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=be(r),a=be(r),o=he(r),u=[],s=0;s<o;s++){var c=ve(r,0,R);u.push(new Z(z.lW.from(c)))}for(var l=ve(r,0,R),d=he(r),y=[],h=0;h<d;h++){var p=be(r),g=ve(r,0,he(r)),f=ve(r,0,he(r)),k=A().encode(z.lW.from(f));y.push({programIdIndex:p,accounts:g,data:k})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:a},recentBlockhash:A().encode(z.lW.from(l)),accountKeys:u,instructions:y})}}]),e}(),Ie=z.lW.alloc(64).fill(0),Se=function(){function e(t){s()(this,e),i()(this,"keys",void 0),i()(this,"programId",void 0),i()(this,"data",z.lW.alloc(0)),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return l()(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:le()(this.data)}}}]),e}(),we=function(){function e(t){if(s()(this,e),i()(this,"signatures",[]),i()(this,"feePayer",void 0),i()(this,"instructions",[]),i()(this,"recentBlockhash",void 0),i()(this,"lastValidBlockHeight",void 0),i()(this,"nonceInfo",void 0),i()(this,"minNonceContextSlot",void 0),i()(this,"_message",void 0),i()(this,"_json",void 0),t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var r=t,n=r.minContextSlot,a=r.nonceInfo;this.minNonceContextSlot=n,this.nonceInfo=a}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var o=t,u=o.blockhash,c=o.lastValidBlockHeight;this.recentBlockhash=u,this.lastValidBlockHeight=c}else{var l=t,d=l.recentBlockhash,y=l.nonceInfo;y&&(this.nonceInfo=y),this.recentBlockhash=d}}var t;return l()(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){return e.publicKey.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new Se(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat(le()(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(var n=0;n<t.length;n++)if(void 0===t[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var i=[],a=[];t.forEach((function(e){e.keys.forEach((function(e){a.push(se()({},e))}));var t=e.programId.toString();i.includes(t)||i.push(t)})),i.forEach((function(e){a.push({pubkey:new Z(e),isSigner:!1,isWritable:!1})}));var u=[];a.forEach((function(e){var t=e.pubkey.toString(),r=u.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?(u[r].isWritable=u[r].isWritable||e.isWritable,u[r].isSigner=u[r].isSigner||e.isSigner):u.push(e)})),u.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));var s=u.findIndex((function(e){return e.pubkey.equals(r)}));if(s>-1){var c=u.splice(s,1),l=o()(c,1)[0];l.isSigner=!0,l.isWritable=!0,u.unshift(l)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});var d,y=oe()(this.signatures);try{var h=function(){var e=d.value,t=u.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));u[t].isSigner||(u[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(y.s();!(d=y.n()).done;)h()}catch(e){y.e(e)}finally{y.f()}var p=0,g=0,f=0,k=[],b=[];u.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(k.push(t.toString()),p+=1,n||(g+=1)):(b.push(t.toString()),n||(f+=1))}));var v=k.concat(b),m=t.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:v.indexOf(r.toString()),accounts:e.keys.map((function(e){return v.indexOf(e.pubkey.toString())})),data:A().encode(t)}}));return m.forEach((function(e){ge(e.programIdIndex>=0),e.accounts.forEach((function(e){return ge(e>=0)}))})),new me({header:{numRequiredSignatures:p,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:f},accountKeys:v,recentBlockhash:e,instructions:m})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:(t=k()(g()().mark((function e(t){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,o=t;a<o.length;a++){var u=o[a],s=u.publicKey.toString();n.has(s)||(n.add(s),i.push(u))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,o=t;a<o.length;a++){var u=o[a],s=u.publicKey.toString();n.has(s)||(n.add(s),i.push(u))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.forEach((function(e){var n=J(r,e.secretKey);t._addSignature(e.publicKey,N(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){ge(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=z.lW.from(t)}},{key:"verifySignatures",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._getMessageSignednessErrors(this.serializeMessage(),e);return!t}},{key:"_getMessageSignednessErrors",value:function(e,t){var r,n={},i=oe()(this.signatures);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.signature,u=a.publicKey;null===o?t&&(n.missing||(n.missing=[])).push(u):O(o,e,u.toBytes())||(n.invalid||(n.invalid=[])).push(u)}}catch(e){i.e(e)}finally{i.f()}return n.invalid||n.missing?n:void 0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n){var a=this._getMessageSignednessErrors(i,r);if(a){var o="Signature verification failed.";throw a.invalid&&(o+="\nInvalid signature for public key".concat(1===a.invalid.length?"":"(s)"," [`").concat(a.invalid.map((function(e){return e.toBase58()})).join("`, `"),"`].")),a.missing&&(o+="\nMissing signature for public key".concat(1===a.missing.length?"":"(s)"," [`").concat(a.missing.map((function(e){return e.toBase58()})).join("`, `"),"`].")),new Error(o)}}return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];pe(r,t.length);var n=r.length+64*t.length+e.length,i=z.lW.alloc(n);return ge(t.length<256),z.lW.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(ge(64===n.length,"signature has invalid length"),z.lW.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),ge(i.length<=de,"Transaction too large: ".concat(i.length," > ").concat(de)),i}},{key:"keys",get:function(){return ge(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return ge(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return ge(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=le()(t),n=he(r),i=[],a=0;a<n;a++){var o=ve(r,0,64);i.push(A().encode(z.lW.from(o)))}return e.populate(me.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==A().encode(Ie)?null:A().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new Se({keys:r,programId:t.accountKeys[e.programIdIndex],data:A().decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}]),e}(),We=Object.freeze({Create:{index:0,layout:d.n_([d.Jq("instruction"),d.gM("lamports"),d.gM("space"),h.ZL("programId")])},Assign:{index:1,layout:d.n_([d.Jq("instruction"),h.ZL("programId")])},Transfer:{index:2,layout:d.n_([d.Jq("instruction"),D("lamports")])},CreateWithSeed:{index:3,layout:d.n_([d.Jq("instruction"),h.ZL("base"),h.pE("seed"),d.gM("lamports"),d.gM("space"),h.ZL("programId")])},AdvanceNonceAccount:{index:4,layout:d.n_([d.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:d.n_([d.Jq("instruction"),d.gM("lamports")])},InitializeNonceAccount:{index:6,layout:d.n_([d.Jq("instruction"),h.ZL("authorized")])},AuthorizeNonceAccount:{index:7,layout:d.n_([d.Jq("instruction"),h.ZL("authorized")])},Allocate:{index:8,layout:d.n_([d.Jq("instruction"),d.gM("space")])},AllocateWithSeed:{index:9,layout:d.n_([d.Jq("instruction"),h.ZL("base"),h.pE("seed"),d.gM("space"),h.ZL("programId")])},AssignWithSeed:{index:10,layout:d.n_([d.Jq("instruction"),h.ZL("base"),h.pE("seed"),h.ZL("programId")])},TransferWithSeed:{index:11,layout:d.n_([d.Jq("instruction"),D("lamports"),h.pE("seed"),h.ZL("programId")])},UpgradeNonceAccount:{index:12,layout:d.n_([d.Jq("instruction")])}}),Pe=function(){function e(){s()(this,e)}return l()(e,null,[{key:"createAccount",value:function(e){var t=We.Create,r=(0,F.v)(t,{lamports:e.lamports,space:e.space,programId:N(e.programId.toBuffer())});return new Se({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}},{key:"transfer",value:function(e){var t,r;if("basePubkey"in e){var n=We.TransferWithSeed;t=(0,F.v)(n,{lamports:BigInt(e.lamports),seed:e.seed,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{var i=We.Transfer;t=(0,F.v)(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Se({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;if("basePubkey"in e){var n=We.AssignWithSeed;t=(0,F.v)(n,{base:N(e.basePubkey.toBuffer()),seed:e.seed,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{var i=We.Assign;t=(0,F.v)(i,{programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Se({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=We.CreateWithSeed,r=(0,F.v)(t,{base:N(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:N(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Se({keys:n,programId:this.programId,data:r})}},{key:"createNonceAccount",value:function(t){var r=new we;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:G,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:G,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=We.InitializeNonceAccount,r=(0,F.v)(t,{authorized:N(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Se(n)}},{key:"nonceAdvance",value:function(e){var t=We.AdvanceNonceAccount,r=(0,F.v)(t),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Se(n)}},{key:"nonceWithdraw",value:function(e){var t=We.WithdrawNonceAccount,r=(0,F.v)(t,{lamports:e.lamports});return new Se({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}},{key:"nonceAuthorize",value:function(e){var t=We.AuthorizeNonceAccount,r=(0,F.v)(t,{authorized:N(e.newAuthorizedPubkey.toBuffer())});return new Se({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}},{key:"allocate",value:function(e){var t,r;if("basePubkey"in e){var n=We.AllocateWithSeed;t=(0,F.v)(n,{base:N(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{var i=We.Allocate;t=(0,F.v)(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Se({keys:r,programId:this.programId,data:t})}}]),e}();i()(Pe,"programId",new Z("11111111111111111111111111111111"));d.n_([d.Jq("typeIndex"),D("deactivationSlot"),d._O("lastExtendedSlot"),d.u8("lastExtendedStartIndex"),d.u8(),d.A9(h.ZL(),d.cv(d.u8(),-1),"authority")]);var xe=Object.freeze({CreateLookupTable:{index:0,layout:d.n_([d.Jq("instruction"),D("recentSlot"),d.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:d.n_([d.Jq("instruction")])},ExtendLookupTable:{index:2,layout:d.n_([d.Jq("instruction"),D(),d.A9(h.ZL(),d.cv(d.Jq(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:d.n_([d.Jq("instruction")])},CloseLookupTable:{index:4,layout:d.n_([d.Jq("instruction")])}}),Ae=function(){function e(){s()(this,e)}return l()(e,null,[{key:"createLookupTable",value:function(e){var t=Z.findProgramAddressSync([e.authority.toBuffer(),(0,y.bP)().encode(e.recentSlot)],this.programId),r=o()(t,2),n=r[0],i=r[1],a=xe.CreateLookupTable,u=(0,F.v)(a,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Pe.programId,isSigner:!1,isWritable:!1}];return[new Se({programId:this.programId,keys:s,data:u}),n]}},{key:"freezeLookupTable",value:function(e){var t=xe.FreezeLookupTable,r=(0,F.v)(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Se({programId:this.programId,keys:n,data:r})}},{key:"extendLookupTable",value:function(e){var t=xe.ExtendLookupTable,r=(0,F.v)(t,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Pe.programId,isSigner:!1,isWritable:!1}),new Se({programId:this.programId,keys:n,data:r})}},{key:"deactivateLookupTable",value:function(e){var t=xe.DeactivateLookupTable,r=(0,F.v)(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Se({programId:this.programId,keys:n,data:r})}},{key:"closeLookupTable",value:function(e){var t=xe.CloseLookupTable,r=(0,F.v)(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Se({programId:this.programId,keys:n,data:r})}}]),e}();i()(Ae,"programId",new Z("AddressLookupTab1e1111111111111111111111111"));var ze=Object.freeze({RequestUnits:{index:0,layout:d.n_([d.u8("instruction"),d.Jq("units"),d.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:d.n_([d.u8("instruction"),d.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:d.n_([d.u8("instruction"),d.Jq("units")])},SetComputeUnitPrice:{index:3,layout:d.n_([d.u8("instruction"),D("microLamports")])}}),Ke=function(){function e(){s()(this,e)}return l()(e,null,[{key:"requestUnits",value:function(e){var t=ze.RequestUnits,r=(0,F.v)(t,e);return new Se({keys:[],programId:this.programId,data:r})}},{key:"requestHeapFrame",value:function(e){var t=ze.RequestHeapFrame,r=(0,F.v)(t,e);return new Se({keys:[],programId:this.programId,data:r})}},{key:"setComputeUnitLimit",value:function(e){var t=ze.SetComputeUnitLimit,r=(0,F.v)(t,e);return new Se({keys:[],programId:this.programId,data:r})}},{key:"setComputeUnitPrice",value:function(e){var t=ze.SetComputeUnitPrice,r=(0,F.v)(t,{microLamports:BigInt(e.microLamports)});return new Se({keys:[],programId:this.programId,data:r})}}]),e}();i()(Ke,"programId",new Z("ComputeBudget111111111111111111111111111111"));var _e=function(){function e(t){s()(this,e),i()(this,"_keypair",void 0),this._keypair=null!=t?t:B()}return l()(e,[{key:"publicKey",get:function(){return new Z(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(B())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw new Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation)for(var i=t.slice(0,32),a=E(i),o=0;o<32;o++)if(n[o]!==a[o])throw new Error("provided secretKey is invalid");return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=E(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),Be=d.n_([d.u8("numSignatures"),d.u8("padding"),d.KB("signatureOffset"),d.KB("signatureInstructionIndex"),d.KB("publicKeyOffset"),d.KB("publicKeyInstructionIndex"),d.KB("messageDataOffset"),d.KB("messageDataSize"),d.KB("messageInstructionIndex")]),Ee=function(){function e(){s()(this,e)}return l()(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.instructionIndex;ge(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),ge(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var o=Be.span,u=o+r.length,s=u+i.length,c=z.lW.alloc(s+n.length),l=null==a?65535:a;return Be.encode({numSignatures:1,padding:0,signatureOffset:u,signatureInstructionIndex:l,publicKeyOffset:o,publicKeyInstructionIndex:l,messageDataOffset:s,messageDataSize:n.length,messageInstructionIndex:l},c),c.fill(r,o),c.fill(i,u),c.fill(n,s),new Se({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ge(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=_e.fromSecretKey(t),a=i.publicKey.toBytes(),o=J(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:o,instructionIndex:n})}catch(e){throw new Error("Error creating instruction; ".concat(e))}}}]),e}();i()(Ee,"programId",new Z("Ed25519SigVerify111111111111111111111111111"));var qe,Le=r(85609),Te=r(95085),Je=(Te.kA.utils.isValidPrivateKey,Te.kA.getPublicKey),Oe=d.n_([d.u8("numSignatures"),d.KB("signatureOffset"),d.u8("signatureInstructionIndex"),d.KB("ethAddressOffset"),d.u8("ethAddressInstructionIndex"),d.KB("messageDataOffset"),d.KB("messageDataSize"),d.u8("messageInstructionIndex"),d.Ik(20,"ethAddress"),d.Ik(64,"signature"),d.u8("recoveryId")]),Me=function(){function e(){s()(this,e)}return l()(e,null,[{key:"publicKeyToEthAddress",value:function(e){ge(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return z.lW.from((0,Le.fr)(N(e))).slice(-20)}catch(e){throw new Error("Error constructing Ethereum address: ".concat(e))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.recoveryId,o=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:a,instructionIndex:o})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,a=t.signature,o=t.recoveryId,u=t.instructionIndex,s=void 0===u?0:u;ge(20===(r="string"==typeof n?n.startsWith("0x")?z.lW.from(n.substr(2),"hex"):z.lW.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var c=12+r.length,l=c+a.length+1,d=z.lW.alloc(Oe.span+i.length);return Oe.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:l,messageDataSize:i.length,messageInstructionIndex:s,signature:N(a),ethAddress:N(r),recoveryId:o},d),d.fill(N(i),Oe.span),new Se({keys:[],programId:e.programId,data:d})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ge(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=N(t),a=Je(i,!1).slice(1),u=function(e,t){var r=Te.kA.sign(e,t);return[r.toCompactRawBytes(),r.recovery]}(z.lW.from((0,Le.fr)(N(r))),i),s=o()(u,2),c=s[0],l=s[1];return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:c,recoveryId:l,instructionIndex:n})}catch(e){throw new Error("Error creating instruction; ".concat(e))}}}]),e}();i()(Me,"programId",new Z("KeccakSecp256k11111111111111111111111111111"));var Ce=new Z("StakeConfig11111111111111111111111111111111"),Ue=l()((function e(t,r,n){s()(this,e),i()(this,"unixTimestamp",void 0),i()(this,"epoch",void 0),i()(this,"custodian",void 0),this.unixTimestamp=t,this.epoch=r,this.custodian=n}));qe=Ue,i()(Ue,"default",new qe(0,0,Z.default));var Ne=Object.freeze({Initialize:{index:0,layout:d.n_([d.Jq("instruction"),h.Gt(),h.rI()])},Authorize:{index:1,layout:d.n_([d.Jq("instruction"),h.ZL("newAuthorized"),d.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:d.n_([d.Jq("instruction")])},Split:{index:3,layout:d.n_([d.Jq("instruction"),d.gM("lamports")])},Withdraw:{index:4,layout:d.n_([d.Jq("instruction"),d.gM("lamports")])},Deactivate:{index:5,layout:d.n_([d.Jq("instruction")])},Merge:{index:7,layout:d.n_([d.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:d.n_([d.Jq("instruction"),h.ZL("newAuthorized"),d.Jq("stakeAuthorizationType"),h.pE("authoritySeed"),h.ZL("authorityOwner")])}}),Re=(Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),function(){function e(){s()(this,e)}return l()(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||Ue.default,i=Ne.Initialize,a=(0,F.v)(i,{authorized:{staker:N(r.staker.toBuffer()),withdrawer:N(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:N(n.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:X,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Se(o)}},{key:"createAccountWithSeed",value:function(e){var t=new we;t.add(Pe.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new we;t.add(Pe.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Ne.Delegate,a=(0,F.v)(i);return(new we).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:Ce,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,a=e.custodianPubkey,o=Ne.Authorize,u=(0,F.v)(o,{newAuthorized:N(n.toBuffer()),stakeAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!0,isWritable:!1}),(new we).add({keys:s,programId:this.programId,data:u})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,a=e.newAuthorizedPubkey,o=e.stakeAuthorizationType,u=e.custodianPubkey,s=Ne.AuthorizeWithSeed,c=(0,F.v)(s,{newAuthorized:N(a.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:N(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1}];return u&&l.push({pubkey:u,isSigner:!0,isWritable:!1}),(new we).add({keys:l,programId:this.programId,data:c})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,a=Ne.Split,o=(0,F.v)(a,{lamports:i});return new Se({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"split",value:function(e,t){var r=new we;return r.add(Pe.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e,t){var r=e.stakePubkey,n=e.authorizedPubkey,i=e.splitStakePubkey,a=e.basePubkey,o=e.seed,u=e.lamports,s=new we;return s.add(Pe.allocate({accountPubkey:i,basePubkey:a,seed:o,space:this.space,programId:this.programId})),t&&t>0&&s.add(Pe.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),s.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Ne.Merge,a=(0,F.v)(i);return(new we).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,a=e.custodianPubkey,o=Ne.Withdraw,u=(0,F.v)(o,{lamports:i}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!0,isWritable:!1}),(new we).add({keys:s,programId:this.programId,data:u})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Ne.Deactivate,i=(0,F.v)(n);return(new we).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}]),e}());i()(Re,"programId",new Z("Stake11111111111111111111111111111111111111")),i()(Re,"space",200);var je=Object.freeze({InitializeAccount:{index:0,layout:d.n_([d.Jq("instruction"),h.N4()])},Authorize:{index:1,layout:d.n_([d.Jq("instruction"),h.ZL("newAuthorized"),d.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:d.n_([d.Jq("instruction"),d.gM("lamports")])},UpdateValidatorIdentity:{index:4,layout:d.n_([d.Jq("instruction")])},AuthorizeWithSeed:{index:10,layout:d.n_([d.Jq("instruction"),h.zL()])}}),Ze=(Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),function(){function e(){s()(this,e)}return l()(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,i=je.InitializeAccount,a=(0,F.v)(i,{voteInit:{nodePubkey:N(n.nodePubkey.toBuffer()),authorizedVoter:N(n.authorizedVoter.toBuffer()),authorizedWithdrawer:N(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new Se(o)}},{key:"createAccount",value:function(e){var t=new we;return t.add(Pe.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.voteAuthorizationType,a=je.Authorize,o=(0,F.v)(a,{newAuthorized:N(n.toBuffer()),voteAuthorizationType:i.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new we).add({keys:u,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,a=e.voteAuthorizationType,o=e.votePubkey,u=je.AuthorizeWithSeed,s=(0,F.v)(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:N(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:N(i.toBuffer()),voteAuthorizationType:a.index}}),c=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new we).add({keys:c,programId:this.programId,data:s})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,i=e.toPubkey,a=je.Withdraw,o=(0,F.v)(a,{lamports:n}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new we).add({keys:u,programId:this.programId,data:o})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return e.withdraw(t)}},{key:"updateValidatorIdentity",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.nodePubkey,i=je.UpdateValidatorIdentity,a=(0,F.v)(i),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new we).add({keys:o,programId:this.programId,data:a})}}]),e}());i()(Ze,"programId",new Z("Vote111111111111111111111111111111111111111")),i()(Ze,"space",3762)},23204:function(e){"use strict";const t=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");t=Object.assign({pascalCase:!1},t);if(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim(),0===e.length)return"";if(1===e.length)return t.pascalCase?e.toUpperCase():e.toLowerCase();return e!==e.toLowerCase()&&(e=(e=>{let t=!1,r=!1,n=!1;for(let i=0;i<e.length;i++){const a=e[i];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,n=r,r=!0,i++):r&&n&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,i-1)+"-"+e.slice(i-1),n=r,r=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,n=r,r=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e})(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,((e,t)=>t.toUpperCase())).replace(/\d+(\w|$)/g,(e=>e.toUpperCase())),r=e,t.pascalCase?r.charAt(0).toUpperCase()+r.slice(1):r;var r};e.exports=t,e.exports.default=t},42672:function(e,t,r){var n=r(21314),i=r(21771);function a(t,r,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},15143:function(e){e.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},12665:function(e,t,r){var n=r(48374),i=r(21314),a=r(15143),o=r(42672);function u(t){var r="function"==typeof Map?new Map:void 0;return e.exports=u=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,u(t)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}}]);